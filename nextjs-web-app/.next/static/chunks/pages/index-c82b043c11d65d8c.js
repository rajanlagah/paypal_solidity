(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{75557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(87535)}])},87535:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var a=n(85893),s=n(67294),r=n(83078),i=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"name":"addName","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_otherPartyAddress","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"string","name":"_message","type":"string"}],"name":"createRequest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_user_address","type":"address"}],"name":"getAllRequests","outputs":[{"internalType":"address[]","name":"","type":"address[]"},{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"string[]","name":"","type":"string[]"},{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user_address","type":"address"}],"name":"getMyHistory","outputs":[{"components":[{"internalType":"string","name":"action","type":"string"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"string","name":"message","type":"string"},{"internalType":"address","name":"otherPartyAddress","type":"address"},{"internalType":"string","name":"otherPartyName","type":"string"}],"internalType":"struct Paypal.send_receive[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user_address","type":"address"}],"name":"getMyName","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"bool","name":"hasName","type":"bool"}],"internalType":"struct Paypal.user_name","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"i_owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_request_index","type":"uint256"}],"name":"payRequest","outputs":[],"stateMutability":"payable","type":"function"}]'),l=n(7732),c=function(e){let{dollarsBalance:t}=e;return(0,a.jsxs)(l.Z,{title:"Current Balance",style:{width:"100%"},children:[(0,a.jsxs)("div",{className:"currentBalance",children:[(0,a.jsxs)("div",{style:{lineHeight:"70px"},children:["$ ",t]}),(0,a.jsx)("div",{style:{fontSize:"20px"},children:"Available"})]}),(0,a.jsxs)("div",{className:"balanceOptions",children:[(0,a.jsx)("div",{className:"extraOption",children:"Swap Tokens"}),(0,a.jsx)("div",{className:"extraOption",children:"Bridge Tokens"})]})]})},o=n(87547),d=n(74494),u=n(17917),p=function(e){let{userName:t,setuserName:n,getSetNameAndBalance:l}=e,[c,o]=(0,s.useState)(!1),[p,m]=(0,s.useState)(!1),{chainId:y,account:x}=(0,r.Nr)(),g=parseInt(y),{runContractFunction:h,isLoading:_,isFetching:j}=(0,r.JX)({abi:i,chainId:g,contractAddress:"0xFACb04C23b21f40A725b18F8d4AA5571e183dc7C",functionName:"addName",params:{_name:t}});(0,s.useEffect)(()=>{c&&l()},[c]);let b=e=>{m(e)},f=async()=>{o(!1);let e=await h();await e.wait(1),o(!0),b(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{title:"Enter username",open:p,onOk:f,onCancel:()=>b(!1),okText:"Proceed To Request",cancelText:"Cancel",children:(0,a.jsx)(u.Z,{placeholder:"Rajan",value:t,onChange:e=>n(e.target.value)})}),(0,a.jsx)("div",{className:"balanceOptions",children:(0,a.jsx)("button",{className:"extraOption",onClick:()=>b(!0),children:"Set Username"})})]})},m=function(e){let{name:t,getSetNameAndBalance:n,balance:r,address:i=""}=e,[c,d]=(0,s.useState)(t);return(0,a.jsxs)(l.Z,{title:"Account Details",style:{width:"100%"},children:[(0,a.jsxs)("div",{className:"accountDetailRow",children:[(0,a.jsx)(o.Z,{style:{color:"#767676",fontSize:"25px"}}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"accountDetailHead",children:[" ",t&&t," "]}),(0,a.jsxs)("div",{className:"accountDetailBody",children:[" ","Address: ",i.substring(0,6)," ... ",i.slice(-6)]})]})]}),(0,a.jsx)("div",{className:"accountDetailRow",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"accountDetailHead",children:" Native Matic Tokens"}),(0,a.jsxs)("div",{className:"accountDetailBody",children:[r," Matic"]})]})}),(0,a.jsx)(p,{setuserName:d,userName:c,getSetNameAndBalance:n})]})},y=n(5573);let x=[{title:"Payment Subjet",dataIndex:"subject",key:"subject"},{title:"Type",dataIndex:"type",key:"type"},{title:"Address",dataIndex:"address",key:"address"},{title:"Message",dataIndex:"message",key:"message"},{title:"Amount",key:"amount",render:(e,t)=>(0,a.jsxs)("div",{style:"Send"===t.type?{color:"red"}:{color:"green"},children:["Send"===t.type?"-":"+",t.amount," Matic"]})}];var g=function(e){let{history:t}=e;return(0,a.jsx)(l.Z,{title:"Recent Activity",style:{width:"100%",minHeight:"663px"},children:t&&(0,a.jsx)(y.Z,{dataSource:t,columns:x,pagination:{position:["bottomCenter"],pageSize:8}})})},h=n(97183),_=n(6154);let j=async e=>{try{let t=await (0,_.Z)("/api/getUserBalance?userAddress=".concat(e));if(200==t.status)return{error:!1,...t.data};return{error:!0,balance:"-",dollar_value:"-"}}catch(e){return console.log(error),{error:!0,balance:"-",dollar_value:"-"}}};var b=n(4795),f=n(94668),A=n(75081),N=n(12251),C=e=>{let{handleOnPayReqClick:t,payModal:n,isLoadingPayReq:s,hidePayModal:r,waitingForConfirmation:i,requests:l,requestModal:c,handleOnCreateReqClick:o,isLoadingCreateReq:p,hideRequestModal:m,setRequestAmount:y,requestAmount:x,setRequestAddress:g,requestAddress:h,setRequestMessage:_,requestMessage:j,showPayModal:C,showRequestModal:v,isuserAddressWrong:T}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.Z,{title:"Confirm Payment",open:n,onOk:t,confirmLoading:s,onCancel:r,okText:"Proceed To Pay",cancelText:"Cancel",children:[!i&&l&&l["0"].length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h2",{children:["Sending payment to ",l["3"][0]]}),(0,a.jsx)("p",{children:l["2"][0]})]}),i&&(0,a.jsxs)(A.Z,{tip:"Waiting for confirmation",size:"large",children:[(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"content"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]})]}),(0,a.jsxs)(d.Z,{title:"Request A Payment",open:c,onOk:o,confirmLoading:p||i,onCancel:m,okText:"Proceed To Request",cancelText:"Cancel",children:[!i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["Amount ( ",Number(x||0)/1e3," Matic)"]}),(0,a.jsx)(N.Z,{value:x,onChange:e=>y(e)}),(0,a.jsx)("p",{children:"From (address)"}),(0,a.jsx)(u.Z,{placeholder:"0x...",value:h,status:T&&"error",onChange:e=>g(e.target.value)}),(0,a.jsx)("p",{children:"Message"}),(0,a.jsx)(u.Z,{placeholder:"Lunch Bill...",value:j,onChange:e=>_(e.target.value)})]}),i&&(0,a.jsxs)(A.Z,{tip:"Waiting for confirmation",size:"large",children:[(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"content"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]})]}),(0,a.jsxs)("div",{className:"requestAndPay",children:[(0,a.jsxs)("div",{className:"quickOption",onClick:()=>{C()},children:["dsds",(0,a.jsx)(b.Z,{style:{fontSize:"26px"}}),"Pay",l&&l[0]&&l[0].length>0&&(0,a.jsx)("div",{className:"numReqs",children:l[0].length})]}),(0,a.jsxs)("div",{className:"quickOption",onClick:()=>{v()},children:[(0,a.jsx)(f.Z,{style:{fontSize:"26px"}}),"Request"]})]})]})},v=function(e){let{requests:t,getSetNameAndBalance:n}=e,[l,c]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!1),[u,p]=(0,s.useState)(5),[m,y]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[h,_]=(0,s.useState)(!1),[j,b]=(0,s.useState)(!1),[f,A]=(0,s.useState)(!1),[N,v]=(0,s.useState)(!1),{chainId:T,isWeb3Enabled:S,account:w}=(0,r.Nr)(),q=parseInt(T),{runContractFunction:k,isLoading:M,isFetching:F}=(0,r.JX)({abi:i,chainId:q,contractAddress:"0xFACb04C23b21f40A725b18F8d4AA5571e183dc7C",functionName:"payRequest",params:{_request_index:0},msgValue:String(Number(1e15*t["1"][0]))}),{runContractFunction:R,isLoading:P}=(0,r.JX)({abi:i,chainId:q,contractAddress:"0xFACb04C23b21f40A725b18F8d4AA5571e183dc7C",functionName:"createRequest",params:{_otherPartyAddress:m,_amount:u,_message:x}});(0,s.useEffect)(()=>{(N||j)&&n()},[N,j]);let Z=()=>{c(!1)},O=()=>{d(!1)},H=async()=>{v(!1);let e=await k();e&&(_(!0),await e.wait(1),_(!1),v(!0)),Z()},E=async()=>{b(!1),A(!1);let e=await R();e?(_(!0),await e.wait(1),_(!1),b(!0),O()):A(!0)};return(0,a.jsx)(C,{handleOnPayReqClick:H,payModal:l,isLoadingPayReq:M,hidePayModal:Z,waitingForConfirmation:h,requests:t,requestModal:o,handleOnCreateReqClick:E,isLoadingCreateReq:P,hideRequestModal:O,setRequestAmount:p,requestAmount:u,setRequestAddress:y,requestAddress:m,setRequestMessage:g,requestMessage:x,showPayModal:()=>{c(!0)},showRequestModal:()=>{d(!0)},isuserAddressWrong:f})};let{Header:T,Content:S}=h.Z;function w(){let[e,t]=(0,s.useState)("..."),[n,l]=(0,s.useState)("..."),[o,d]=(0,s.useState)("..."),[u,p]=(0,s.useState)("..."),[y,x]=(0,s.useState)(null),[_,b]=(0,s.useState)({1:[0],0:[]}),[f,A]=(0,s.useState)(),{chainId:N,isWeb3Enabled:C,account:T}=(0,r.Nr)(),w=parseInt(N);(0,s.useEffect)(()=>{C&&T&&A(T)},[C,T]);let{runContractFunction:q,isLoading:k,isFetching:M}=(0,r.JX)({abi:i,chainId:w,contractAddress:"0xFACb04C23b21f40A725b18F8d4AA5571e183dc7C",functionName:"getMyName",params:{_user_address:f}}),{runContractFunction:F}=(0,r.JX)({abi:i,chainId:w,contractAddress:"0xFACb04C23b21f40A725b18F8d4AA5571e183dc7C",functionName:"getMyHistory",params:{_user_address:f}}),{runContractFunction:R}=(0,r.JX)({abi:i,chainId:w,contractAddress:"0xFACb04C23b21f40A725b18F8d4AA5571e183dc7C",functionName:"getAllRequests",params:{_user_address:f}}),P=async()=>{l(!0);try{let e=await q(),n=await F(),a=await R();l(!1),e&&e.length>0&&e[1]&&t(e[0]),console.log("_user_name -",e),console.log("_user_history -",n),console.log("_user_requests -",a),n&&x(function(e){let t=e.map((t,n)=>({key:(e.length+1-n).toString(),type:t[0],amount:parseFloat(t[1].toString())/1e3,message:t[2],address:"".concat(t[3].slice(0,4),"...").concat(t[3].slice(0,4)),subject:t[4]}));return t.reverse()}(n)),a&&b(a)}catch(e){l(!1),console.log("err",e)}};(0,s.useEffect)(()=>{C&&f&&(P(),Z())},[C,f]);let Z=async()=>{try{let e=await j(f);console.log("res",e),e.error||(p(e.dollar_value),d(e.balance)),console.log("res res = ",e)}catch(e){console.log("Exception",e)}};return(0,a.jsx)("div",{className:"App ".concat(n&&"disable-content"),children:(0,a.jsx)(h.Z,{children:(0,a.jsxs)(S,{className:"content",children:[(0,a.jsxs)("div",{className:"firstColumn",children:[(0,a.jsx)(c,{dollarsBalance:u}),(0,a.jsx)(v,{requests:_,getSetNameAndBalance:P}),(0,a.jsx)(m,{getSetNameAndBalance:P,name:e,address:f,balance:o})]}),(0,a.jsx)("div",{className:"secondColumn",children:(0,a.jsx)(g,{history:y})})]})})})}var q=n(99034),k=n.n(q);function M(){return(0,a.jsx)("div",{className:k().container,children:(0,a.jsx)(w,{})})}},99034:function(e){e.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb"}}},function(e){e.O(0,[44,774,888,179],function(){return e(e.s=75557)}),_N_E=e.O()}]);